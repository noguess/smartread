
> smart-reader@1.0.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.14 [39m[90m/Users/noguess/work/english_study[39m

 [31m‚ùØ[39m src/components/reading/ArticleContent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 107[2mms[22m[39m
     [32m‚úì[39m renders title and content[32m 67[2mms[22m[39m
     [32m‚úì[39m handles selection of text[32m 19[2mms[22m[39m
[31m     [31m√ó[31m ignores empty or multi-word selection[39m[32m 18[2mms[22m[39m
[90mstderr[2m | src/features/history/QuizHistoryPage.test.tsx[2m > [22m[2mQuizHistoryPage[2m > [22m[2mrenders list of history records
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstderr[2m | src/features/history/QuizResultPage.test.tsx[2m > [22m[2mQuizResultPage[2m > [22m[2mrenders loading state initially
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstderr[2m | src/pages/LibraryPage.test.tsx[2m > [22m[2mLibraryPage[2m > [22m[2mrenders initial list and loads more on button click
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [32m‚úì[39m src/components/reading/VocabularyQuestionRenderer.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 378[2mms[22m[39m
 [32m‚úì[39m src/features/history/QuizResultPage.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 545[2mms[22m[39m
 [32m‚úì[39m src/features/history/QuizHistoryPage.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 741[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows snackbar error from navigation state [33m 336[2mms[22m[39m
[90mstderr[2m | src/components/reading/SentenceAnalysisPopover.test.tsx[2m > [22m[2mSentenceAnalysisPopover[2m > [22m[2mshows error state and retry button on failure
[22m[39mSentence analysis failed: Error: API Error
    at [90m/Users/noguess/work/english_study/[39msrc/components/reading/SentenceAnalysisPopover.test.tsx:70:43
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:919:26
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m
    at runTest [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:12[90m)[39m

 [32m‚úì[39m src/components/reading/SentenceAnalysisPopover.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 746[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders analysis markdown correctly after loading [33m 516[2mms[22m[39m
 [32m‚úì[39m src/components/reading/QuizView.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 1047[2mms[22m[39m
[90mstderr[2m | src/components/Layout.test.tsx[2m > [22m[2mLayout Component Responsive[2m > [22m[2mshows permanent drawer and no menu button on desktop
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstdout[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39müîç ReadingPage useEffect triggered
üìç URL id: 7
üì¶ Navigation state: [1mnull[22m
‚úÖ Detected article ID - will load existing article: 7
Loading article by ID: [33m7[39m
Article loaded: {
  id: [33m7[39m,
  uuid: [32m'uuid-fail'[39m,
  title: [32m'Fail Test'[39m,
  content: [32m'Content'[39m,
  targetWords: []
}

[90mstderr[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstdout[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39mQuiz history loaded: [33m0[39m records

[90mstderr[2m | src/components/WordDetailModal.test.tsx[2m > [22m[2mWordDetailModal[2m > [22m[2mhandles dictionary fetch failure gracefully
[22m[39mAuto-fetch dictionary failed: Error: API Error
    at [90m/Users/noguess/work/english_study/[39msrc/components/WordDetailModal.test.tsx:130:70
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:919:26
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m
    at runTest [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:12[90m)[39m

[90mstderr[2m | src/components/reading/ResponsivePopovers.test.tsx[2m > [22m[2mResponsive Popovers[2m > [22m[2mrenders DefinitionPopover as Popover on Desktop
[22m[39mWarning: An update to DefinitionPopover inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DefinitionPopover (/Users/noguess/work/english_study/src/components/reading/DefinitionPopover.tsx:20:30)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)

[90mstderr[2m | src/components/reading/ResponsivePopovers.test.tsx[2m > [22m[2mResponsive Popovers[2m > [22m[2mrenders DefinitionPopover as Popover on Desktop
[22m[39mWarning: An update to DefinitionPopover inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DefinitionPopover (/Users/noguess/work/english_study/src/components/reading/DefinitionPopover.tsx:20:30)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)

 [32m‚úì[39m src/components/Layout.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 900[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows permanent drawer and no menu button on desktop [33m 429[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows menu button and temporary drawer logic on tablet/mobile [33m 470[2mms[22m[39m
[90mstderr[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39mWarning: An update to ReadingPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ReadingPage (/Users/noguess/work/english_study/src/pages/ReadingPage.tsx:61:55)
    at RenderedRoute (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
Warning: An update to ReadingPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ReadingPage (/Users/noguess/work/english_study/src/pages/ReadingPage.tsx:61:55)
    at RenderedRoute (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
Warning: An update to ReadingPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ReadingPage (/Users/noguess/work/english_study/src/pages/ReadingPage.tsx:61:55)
    at RenderedRoute (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1101:7)
Warning: An update to ReadingPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ReadingPage (/Users/noguess/work/english_study/src/pages/ReadingPage.tsx:61:55)
    at RenderedRoute (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:539:7)
    at Routes (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1273:7)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at MemoryRouter (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1101:7)

DOMException [AbortError]: The operation was aborted.
    at Fetch.onAsyncTaskManagerAbort (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:546:23)
    at Object.<anonymous> (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:416:101)
    at AsyncTaskManager.abortAll (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:292:30)
    at AsyncTaskManager.destroy (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:64:21)
    at file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/browser/utilities/BrowserFrameFactory.js:43:22
    at new Promise (<anonymous>)
    at Function.destroyFrame (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/browser/utilities/BrowserFrameFactory.js:30:16)
    at HTMLIFrameElement.#unloadPage (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/html-iframe-element/HTMLIFrameElement.js:363:33)
    at HTMLIFrameElement.[disconnectedFromDocument] (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/html-iframe-element/HTMLIFrameElement.js:238:25)
    at HTMLIFrameElement.[connectedToNode] (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/node/Node.js:788:58)
[90mstdout[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39mStarting quiz generation for article: Fail Test

DOMException [NetworkError]: Failed to execute "fetch()" on "Window" with URL "https://www.youtube.com/embed/dQw4w9WgXcQ?start=10&rel=0&autoplay=1": The operation was aborted.
    at Fetch.onError (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:540:21)
    at ClientRequest.emit (node:events:511:28)
    at TLSSocket.socketErrorListener (node:_http_client:495:9)
    at TLSSocket.emit (node:events:511:28)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at processTicksAndRejections (node:internal/process/task_queues:82:21)
    at runNextTicks (node:internal/process/task_queues:64:3)
    at listOnTimeout (node:internal/timers:540:9)
    at processTimers (node:internal/timers:514:7)
[90mstderr[2m | src/components/reading/ResponsivePopovers.test.tsx[2m > [22m[2mResponsive Popovers[2m > [22m[2mrenders DefinitionPopover as BottomSheet (Drawer) on Mobile
[22m[39mWarning: An update to DefinitionPopover inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DefinitionPopover (/Users/noguess/work/english_study/src/components/reading/DefinitionPopover.tsx:20:30)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)

[90mstderr[2m | src/components/reading/ResponsivePopovers.test.tsx[2m > [22m[2mResponsive Popovers[2m > [22m[2mrenders DefinitionPopover as BottomSheet (Drawer) on Mobile
[22m[39mWarning: An update to DefinitionPopover inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at DefinitionPopover (/Users/noguess/work/english_study/src/components/reading/DefinitionPopover.tsx:20:30)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)

 [32m‚úì[39m src/components/reading/DefinitionPopover.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 1067[2mms[22m[39m
     [33m[2m‚úì[22m[39m uses local DB definition if found [33m 418[2mms[22m[39m
DOMException [AbortError]: The operation was aborted.
    at Fetch.onAsyncTaskManagerAbort (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:546:23)
    at Object.<anonymous> (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:416:101)
    at AsyncTaskManager.abortAll (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:292:30)
    at AsyncTaskManager.destroy (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/async-task-manager/AsyncTaskManager.js:64:21)
    at file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/browser/utilities/BrowserFrameFactory.js:43:22
    at new Promise (<anonymous>)
    at Function.destroyFrame (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/browser/utilities/BrowserFrameFactory.js:30:16)
    at HTMLIFrameElement.#unloadPage (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/html-iframe-element/HTMLIFrameElement.js:363:33)
    at HTMLIFrameElement.[disconnectedFromDocument] (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/html-iframe-element/HTMLIFrameElement.js:238:25)
    at HTMLIFrameElement.[connectedToNode] (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/nodes/node/Node.js:788:58)
DOMException [NetworkError]: Failed to execute "fetch()" on "Window" with URL "https://www.youtube.com/embed/YT_ID?start=30&rel=0&autoplay=1": The operation was aborted.
    at Fetch.onError (file:///Users/noguess/work/english_study/node_modules/happy-dom/lib/fetch/Fetch.js:540:21)
    at ClientRequest.emit (node:events:511:28)
    at TLSSocket.socketErrorListener (node:_http_client:495:9)
    at TLSSocket.emit (node:events:511:28)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at processTicksAndRejections (node:internal/process/task_queues:82:21)
 [32m‚úì[39m src/components/WordDetailModal.video.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 1052[2mms[22m[39m
     [33m[2m‚úì[22m[39m should fetch video from youtube when setting is youtube [33m 834[2mms[22m[39m
 [32m‚úì[39m src/components/reading/ResponsivePopovers.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 755[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders DefinitionPopover as Popover on Desktop [33m 572[2mms[22m[39m
[90mstderr[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows snackbar and stays on reading view when quiz generation fails
[22m[39mFailed to generate quiz: Error: API Quota Exceeded
    at Object.<anonymous> [90m(/Users/noguess/work/english_study/[39msrc/pages/ReadingPage.test.tsx:132:19[90m)[39m

[90mstdout[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows error UI when article generation fails
[22m[39mSetup mocks complete
üîç ReadingPage useEffect triggered
üìç URL id: [90mundefined[39m
üì¶ Navigation state: {
  mode: [32m'generate'[39m,
  words: [ { id: [33m1[39m, spelling: [32m'test'[39m } ],
  settings: { difficultyLevel: [32m'L2'[39m, apiKey: [32m'sk-test'[39m }
}
‚úÖ Detected generation mode. UUID: [90mundefined[39m
Starting V2.0 article generation for words: [ [32m'test'[39m ]

[90mstderr[2m | src/pages/ReadingPage.test.tsx[2m > [22m[2mReadingPage[2m > [22m[2mshows error UI when article generation fails
[22m[39mFailed to generate and save article: Error: LLM Error
    at [90m/Users/noguess/work/english_study/[39msrc/pages/ReadingPage.test.tsx:174:69
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:919:26
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m
    at runTest [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:12[90m)[39m

 [32m‚úì[39m src/pages/ReadingPage.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 784[2mms[22m[39m
     [33m[2m‚úì[22m[39m shows snackbar and stays on reading view when quiz generation fails [33m 754[2mms[22m[39m
[90mstderr[2m | src/components/WordDetailModal.test.tsx[2m > [22m[2mWordDetailModal[2m > [22m[2mshows error state when manual dictionary check fails
[22m[39mFailed to load dictionary data Error: Network Error
    at [90m/Users/noguess/work/english_study/[39msrc/components/WordDetailModal.test.tsx:211:70
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:919:26
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1244:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1210:10[90m)[39m
    at [90mfile:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:37
    at Traces.$ [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4mvitest[24m/dist/chunks/test.DqQZzsWf.js:234:21[90m)[39m
    at runTest [90m(file:///Users/noguess/work/english_study/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1654:12[90m)[39m

 [32m‚úì[39m src/components/WordDetailModal.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1511[2mms[22m[39m
     [33m[2m‚úì[22m[39m loads word from DB if exists [33m 612[2mms[22m[39m
[90mstderr[2m | src/components/reading/ArticleListCard.test.tsx[2m > [22m[2mArticleListCard[2m > [22m[2mrenders article information correctly
[22m[39mreact-i18next:: useTranslation: You will need to pass in an i18next instance by using initReactI18next { code: [32m'NO_I18NEXT_INSTANCE'[39m }

 [31m‚ùØ[39m src/pages/LibraryPage.test.tsx [2m([22m[2m2 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 2252[2mms[22m[39m
     [33m[2m‚úì[22m[39m renders initial list and loads more on button click [33m 1228[2mms[22m[39m
[31m     [31m√ó[31m shows delete confirmation and deletes article[39m[33m 1022[2mms[22m[39m
 [32m‚úì[39m src/components/reading/ArticleListCard.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 230[2mms[22m[39m
 [32m‚úì[39m src/utils/textUtils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 250[2mms[22m[39m
 [32m‚úì[39m src/services/articleService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/services/videoIndexService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/services/analysisStorageService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/utils/__tests__/WordSelector.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/utils/__tests__/SRSAlgorithm.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstdout[2m | src/services/llmService.test.ts[2m > [22m[2mllmService[2m > [22m[2manalyzeSentence sends correct 5-step analysis prompt
[22m[39mStarting LLM generation...

[90mstdout[2m | src/services/llmService.test.ts[2m > [22m[2mllmService[2m > [22m[2mgenerateArticleOnly sends prompt with Word Study instructions
[22m[39mStarting LLM generation...

[90mstdout[2m | src/services/llmService.test.ts[2m > [22m[2mllmService[2m > [22m[2mgenerateQuizForArticle injects IDs if missing
[22m[39mStarting LLM generation...

 [32m‚úì[39m src/services/llmService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/features/history/HistoryListCard.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 173[2mms[22m[39m
 [32m‚úì[39m src/components/reading/GenerationLoading.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m‚úì[39m src/services/settingsService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/difficultyLogic.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstderr[2m | src/pages/HomePage.test.tsx[2m > [22m[2mHomePage Responsiveness[2m > [22m[2muses correct grid breakpoints for Tablet adaptation
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstderr[2m | src/pages/HomePage.test.tsx[2m > [22m[2mHomePage Responsiveness[2m > [22m[2muses correct grid breakpoints for Tablet adaptation
[22m[39mWarning: An update to HomePage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at HomePage (/Users/noguess/work/english_study/src/pages/HomePage.tsx:36:59)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/Users/noguess/work/english_study/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)
Warning: An update to HomePage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at HomePage (/Users/noguess/work/english_study/src/pages/HomePage.tsx:36:59)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/Users/noguess/work/english_study/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)
Warning: An update to HomePage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at HomePage (/Users/noguess/work/english_study/src/pages/HomePage.tsx:36:59)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/Users/noguess/work/english_study/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)
Warning: An update to HomePage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at HomePage (/Users/noguess/work/english_study/src/pages/HomePage.tsx:36:59)
    at Router (/Users/noguess/work/english_study/node_modules/react-router/dist/umd/react-router.development.js:1207:17)
    at BrowserRouter (/Users/noguess/work/english_study/node_modules/react-router-dom/dist/umd/react-router-dom.development.js:695:7)
    at DefaultPropsProvider (/Users/noguess/work/english_study/node_modules/@mui/system/DefaultPropsProvider/DefaultPropsProvider.js:18:3)
    at RtlProvider (/Users/noguess/work/english_study/node_modules/@mui/system/RtlProvider/index.js:19:7)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/private-theming/node/ThemeProvider/ThemeProvider.js:39:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/system/ThemeProvider/ThemeProvider.js:53:5)
    at ThemeProvider (/Users/noguess/work/english_study/node_modules/@mui/material/node/styles/ThemeProvider.js:21:14)

 [32m‚úì[39m src/pages/HomePage.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 55[2mms[22m[39m
 [32m‚úì[39m src/components/reading/ArticleInteraction.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [32m‚úì[39m src/features/history/components/QuestionReviewCard.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 155[2mms[22m[39m
[90mstderr[2m | src/components/dashboard/RecentActivityList.test.tsx[2m > [22m[2mRecentActivityList[2m > [22m[2mrenders activities correctly
[22m[39mWarning: validateDOMNesting(...): <div> cannot appear as a descendant of <p>.
    at div
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at Chip (/Users/noguess/work/english_study/node_modules/@mui/material/node/Chip/Chip.js:290:59)
    at div
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at Box (/Users/noguess/work/english_study/node_modules/@mui/system/createBox.js:31:41)
    at p
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at Typography (/Users/noguess/work/english_study/node_modules/@mui/material/node/Typography/Typography.js:92:64)
    at div
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at ListItemText (/Users/noguess/work/english_study/node_modules/@mui/material/node/ListItemText/ListItemText.js:66:59)
    at li
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at ListItem (/Users/noguess/work/english_study/node_modules/@mui/material/node/ListItem/ListItem.js:147:59)
    at ul
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at List (/Users/noguess/work/english_study/node_modules/@mui/material/node/List/List.js:58:59)
    at div
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at Paper (/Users/noguess/work/english_study/node_modules/@mui/material/node/Paper/Paper.js:70:59)
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at Card (/Users/noguess/work/english_study/node_modules/@mui/material/node/Card/Card.js:43:59)
    at /Users/noguess/work/english_study/node_modules/@emotion/react/dist/emotion-element-e8f4cc37.development.cjs.js:60:23
    at RecentActivityList (/Users/noguess/work/english_study/src/components/dashboard/RecentActivityList.tsx:14:31)

 [32m‚úì[39m src/components/dashboard/RecentActivityList.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32m‚úì[39m src/components/dashboard/DashboardHero.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 92[2mms[22m[39m
[90mstdout[2m | src/pages/ReadingPageLayout.test.tsx[2m > [22m[2mReadingPage Layout[2m > [22m[2madapts layout for Mobile/Tablet vs Desktop
[22m[39müîç ReadingPage useEffect triggered
üìç URL id: 1
üì¶ Navigation state: [1mnull[22m
‚úÖ Detected article ID - will load existing article: 1
Loading article by ID: [33m1[39m
Article loaded: {
  id: [33m1[39m,
  uuid: [32m'test-uuid'[39m,
  title: [32m'Test Article'[39m,
  content: [32m'Content'[39m,
  targetWords: [ [32m'word'[39m ],
  difficultyLevel: [32m'L2'[39m,
  wordCtxMeanings: []
}

[90mstderr[2m | src/pages/ReadingPageLayout.test.tsx[2m > [22m[2mReadingPage Layout[2m > [22m[2madapts layout for Mobile/Tablet vs Desktop
[22m[39m‚ö†Ô∏è React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
‚ö†Ô∏è React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[90mstdout[2m | src/pages/ReadingPageLayout.test.tsx[2m > [22m[2mReadingPage Layout[2m > [22m[2madapts layout for Mobile/Tablet vs Desktop
[22m[39mQuiz history loaded: [33m0[39m records

 [32m‚úì[39m src/pages/ReadingPageLayout.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 116[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 2 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/pages/LibraryPage.test.tsx[2m > [22mLibraryPage[2m > [22mshows delete confirmation and deletes article
[31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: Article 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"MuiContainer-root MuiContainer-maxWidthLg css-1sqq6so-MuiContainer-root"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"MuiBox-root css-4ddkzq"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"MuiBox-root css-0"[31m
        [36m>[31m
          [36m<h4[31m
            [33mclass[31m=[32m"MuiTypography-root MuiTypography-h4 css-1bskoqe-MuiTypography-root"[31m
          [36m>[31m
            [0mÊàëÁöÑÈòÖËØªÂàóË°®[0m
          [36m</h4>[31m
          [36m<p[31m
            [33mclass[31m=[32m"MuiTypography-root MuiTypography-body2 css-r40f8v-MuiTypography-root"[31m
          [36m>[31m
            [0mlibrary:subtitle[0m
          [36m</p>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"MuiStack-root css-1sazv7p-MuiStack-root"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"MuiBox-root css-15jfile"[31m
        [36m>[31m
          [36m<p[31m
            [33mclass[31m=[32m"MuiTypography-root MuiTypography-body1 css-ahj2mt-MuiTypography-root"[31m
          [36m>[31m
            [0mlibrary:empty.title[0m
          [36m</p>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"MuiContainer-root MuiContainer-maxWidthLg css-1sqq6so-MuiContainer-root"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"MuiBox-root css-4ddkzq"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"MuiBox-root css-0"[31m
          [36m>[31m
            [36m<h4[31m
              [33mclass[31m=[32m"MuiTypography-root MuiTypography-h4 css-1bskoqe-MuiTypography-root"[31m
            [36m>[31m
              [0mÊàëÁöÑÈòÖËØªÂàóË°®[0m
            [36m</h4>[31m
            [36m<p[31m
              [33mclass[31m=[32m"MuiTypography-root MuiTypography-body2 css-r40f8v-MuiTypography-root"[31m
            [36m>[31m
              [0mlibrary:subtitle[0m
            [36m</p>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"MuiStack-root css-1sazv7p-MuiStack-root"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"MuiBox-root css-15jfile"[31m
          [36m>[31m
            [36m<p[31m
              [33mclass[31m=[32m"MuiTypography-root MuiTypography-body1 css-ahj2mt-MuiTypography-root"[31m
            [36m>[31m
              [0mlibrary:empty.title[0m
            [36m</p>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m...[39m
[90m [2m‚ùØ[22m Proxy.waitFor node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2m‚ùØ[22m src/pages/LibraryPage.test.tsx:[2m128:15[22m[39m
    [90m126| [39m
    [90m127| [39m        [90m// Wait for list[39m
    [90m128| [39m        [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m              [31m^[39m
    [90m129| [39m            [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Article 1'[39m))[33m.[39m[34mtoBeInTheDocument[39m()
    [90m130| [39m        })

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/2]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/components/reading/ArticleContent.test.tsx[2m > [22mArticleContent[2m > [22mignores empty or multi-word selection
[31m[1mTypeError[22m: selection.getRangeAt is not a function[39m
[36m [2m‚ùØ[22m handleSelection src/components/reading/ArticleContent.tsx:[2m56:37[22m[39m
    [90m 54| [39m        // Allow any selection longer than 1 char (single words or sen‚Ä¶
    [90m 55| [39m        [35mif[39m (text [33m&&[39m text[33m.[39mlength [33m>[39m [34m1[39m) {
    [90m 56| [39m            [35mconst[39m range [33m=[39m selection[33m.[39m[34mgetRangeAt[39m([34m0[39m)
    [90m   | [39m                                    [31m^[39m
    [90m 57| [39m            [35mconst[39m rect [33m=[39m range[33m.[39m[34mgetBoundingClientRect[39m()
    [90m 58| [39m
[90m [2m‚ùØ[22m HTMLUnknownElement.callCallback node_modules/react-dom/cjs/react-dom.development.js:[2m4164:14[22m[39m
[90m [2m‚ùØ[22m HTMLUnknownElement.#callDispatchEventListeners node_modules/happy-dom/lib/event/EventTarget.js:[2m237:34[22m[39m
[90m [2m‚ùØ[22m HTMLUnknownElement.dispatchEvent node_modules/happy-dom/lib/event/EventTarget.js:[2m100:41[22m[39m
[90m [2m‚ùØ[22m HTMLUnknownElement.#goThroughDispatchEventPhases node_modules/happy-dom/lib/event/EventTarget.js:[2m160:38[22m[39m
[90m [2m‚ùØ[22m HTMLUnknownElement.dispatchEvent node_modules/happy-dom/lib/event/EventTarget.js:[2m96:47[22m[39m
[90m [2m‚ùØ[22m Object.invokeGuardedCallbackDev node_modules/react-dom/cjs/react-dom.development.js:[2m4213:16[22m[39m
[90m [2m‚ùØ[22m invokeGuardedCallback node_modules/react-dom/cjs/react-dom.development.js:[2m4277:31[22m[39m
[90m [2m‚ùØ[22m invokeGuardedCallbackAndCatchFirstError node_modules/react-dom/cjs/react-dom.development.js:[2m4291:25[22m[39m
[90m [2m‚ùØ[22m executeDispatch node_modules/react-dom/cjs/react-dom.development.js:[2m9041:3[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/2]‚éØ[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (31)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m101 passed[39m[22m[90m (103)[39m
[2m   Start at [22m 15:00:11
[2m   Duration [22m 11.60s[2m (transform 7.50s, setup 4.38s, import 91.51s, tests 13.19s, environment 10.91s)[22m

