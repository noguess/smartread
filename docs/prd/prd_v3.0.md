# 英语中考备考智能阅读平台 - 产品需求文档 (PRD) V3.0

| 项目属性 | 内容 |
| :--- | :--- |
| **项目名称** | 英语中考智能阅读平台 (Smart Reader) |
| **版本号** | **V3.0** |
| **日期** | 2025-12-02 |
| **版本定位** | 功能深化与数据量化版本 |
| **核心目标** | 完善单词学习辅助功能，引入学习时长统计，提升学习反馈闭环 |
| **适用终端** | iPad (首选) / PC / Mac (Web Browser) |
| **技术核心** | React + TypeScript + Recharts + Web Speech API + Dictionary API |

---

## 1. V3.0 版本概述

### 1.1 版本背景
在前两个版本建立了核心阅读闭环和优化了用户体验后，V3.0 旨在进一步深化“单词学习”的深度，并引入“时间维度”的数据记录。通过增强单词解释功能和可视化学习时长，帮助用户更全面地掌握单词，并获得更直观的努力反馈。

### 1.2 核心升级方向
本版本聚焦三大功能迭代：

1.  **🔍 全局单词解释升级**
    *   增加语音朗读 (TTS)
    *   集成在线词典查询
    *   优化无视频时的兜底体验

2.  **📚 单词本信息增强**
    *   单词卡片显性展示音标，强化语音记忆

3.  **⏱️ 学习时长统计**
    *   自动记录阅读和做题时长
    *   新增时长趋势图表，可视化学习投入

---

## 2. 详细需求规格

### 🔍 需求一：全局单词解释功能迭代 (Global Word Explanation)

#### 2.1 功能目标
在原有的“本地视频讲解”基础上，补充标准发音和详细词典释义，确保在没有视频资源的情况下，用户依然能获得高质量的单词学习内容。

#### 2.2 交互与UI设计

**1. 模态框 (Modal) 头部优化**
*   **现有**：仅显示单词拼写。
*   **新增**：
    *   **音标显示**：在单词拼写旁显示音标 (如 `/əˈbɪləti/`)。
    *   **朗读按钮**：在单词旁添加“喇叭”图标 🔈。
        *   *交互*：点击调用浏览器 TTS (Web Speech API) 或在线语音接口朗读单词。
    *   **查词典按钮**：在单词旁或底部添加“📖 查词典”按钮/链接。
        *   *交互*：点击后在模态框下方展开/加载详细词典内容。

**2. 智能展示逻辑 (Smart Display Logic)**
*   **场景 A：有本地视频**
    *   默认展示：视频播放器 + 基础释义。
    *   用户操作：用户可手动点击“查词典”展开更多用法。
*   **场景 B：无本地视频 (Default Fallback)**
    *   **自动触发**：系统检测到无视频资源时，**自动触发**“查词典”动作。
    *   **展示内容**：直接展示详细词典内容（音标、多重释义、丰富例句），替代原本的“暂无视频”占位图。

#### 2.3 数据来源
*   **朗读**：优先使用浏览器原生 `window.speechSynthesis`，或调用免费 TTS API。
*   **词典**：集成免费开源词典 API (如 Free Dictionary API)，获取音标、词性、英文释义、例句等。

---

### 📚 需求二：单词本卡片增强 (Word Book Enhancements)

#### 2.4 功能目标
在单词本列表中，让用户一眼就能看到单词的音标，强化“音形义”结合记忆。

#### 2.5 UI 设计
*   **单词卡片/列表项**：
    *   **位置**：在单词拼写 (Spelling) 下方或旁边。
    *   **样式**：使用灰色或弱化字体显示音标 (如 `/əˈbɪləti/`)。
    *   **字体**：使用支持音标显示的字体 (如 'Doulos SIL', 'Arial Unicode MS')，防止乱码。

---

### ⏱️ 需求三：学习时长记录与统计 (Time Tracking & Statistics)

#### 2.6 功能目标
量化用户的学习投入，记录每次阅读和做题花费的时间，并通过图表展示趋势，激励用户坚持学习。

#### 2.7 数据记录逻辑

**1. 计时器 (Timer)**
*   **触发开始**：
    *   进入“文章阅读页面”时开始计时。
    *   进入“做题页面”时继续计时。
*   **暂停/停止**：
    *   离开页面 (组件卸载) 时停止。
    *   页面切后台 (visibilitychange) 时暂停。
*   **有效性判断**：
    *   单次记录过短（如 < 10秒）可视作无效浏览，不计入或单独标记。
    *   单次记录过长（如 > 30分钟无操作）需处理为超时，避免挂机刷时长。

**2. 数据存储**
*   在 `History` 表或新增 `StudySessions` 表中记录：
    *   `date`: 日期
    *   `duration`: 时长 (秒)
    *   `type`: 类型 (Reading / Quiz) - *可选，若需细分*

#### 2.8 统计图表 (Statistics Chart)

**1. 位置**
*   在“统计 (Statistics)”页面新增“学习时长趋势”模块。

**2. 图表设计**
*   **类型**：柱状图 (Bar Chart) 或 区域图 (Area Chart)。
*   **X轴**：日期 (最近7天 / 最近30天)。
*   **Y轴**：学习时长 (分钟)。
*   **交互**：点击/悬停某一天，显示具体时长数值 (如 "25分钟")。

---

## 3. 数据模型调整 (Data Schema Updates)

### 3.1 History 表更新 (或新增表)
建议在现有的 `History` 记录中增加时长字段，或者如果需要更细粒度的统计，建立独立的 `StudyLog`。

**方案 A：直接在 History 中记录 (推荐，简单)**
```typescript
interface History {
  id: string;
  date: number;
  title: string;
  // ... 原有字段
  timeSpent: number; // 新增：本次学习耗时 (秒)
}
```

**方案 B：每日聚合统计 (用于图表)**
```typescript
interface DailyStats {
  date: string; // "2025-12-02"
  totalTime: number; // 当日总秒数
  articlesRead: number; // 当日阅读篇数
}
```

---

## 4. 实施计划

### 4.1 开发优先级
1.  **P0**: 单词本显示音标 (修改 WordCard 组件)。
2.  **P0**: 全局单词解释 - 朗读与查词典 (修改 WordDetailModal 组件，对接 Dictionary API)。
3.  **P1**: 学习时长记录 (实现 useStudyTimer Hook)。
4.  **P1**: 统计图表开发 (集成 Recharts)。

### 4.2 技术难点预判
*   **API 稳定性**：免费词典 API 可能存在限流或网络问题，需做好 Loading 和 Error 状态处理。
*   **计时准确性**：需处理浏览器休眠、切屏等边缘情况，确保时长记录真实有效。

---

**文档维护：**
本 PRD 由产品团队维护。
**最后更新：** 2025-12-02